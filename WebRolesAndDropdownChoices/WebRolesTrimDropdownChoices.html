<!-- Place this script on the form HTML -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    var userRoles = [{% for role in user.roles %}"{{ role }}"{% if forloop.last == false %}, {% endif %}{% endfor %}];
    var roleMap = {
      "Dropdown Value 1": "1",
      "Dropdown Value 2": "2",
      "Dropdown Value 3": "3",
      "Dropdown Value 4": "4"
    };
    var dropdown = document.getElementById('new_yourfieldname');
    var roleValues = [];

    for (var i = 0; i < userRoles.length; i++) {
      if (roleMap[userRoles[i]]) {
        roleValues.push(roleMap[userRoles[i]]);
      }
    }

    if (roleValues.length > 0) {
      for (var i = dropdown.options.length - 1; i >= 0; i--) {
        if (dropdown.options[i].value !== "" && !roleValues.includes(dropdown.options[i].value)) {
          dropdown.remove(i);
        }
      }
    }
  });
</script>
